(this["webpackJsonpreact-boilerplate"]=this["webpackJsonpreact-boilerplate"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(22),c=n.n(s),o=(n(60),n(3)),i=n.n(o),l=n(5),d=n(7),u=n(8),b=n(6),m=n(2),x=n(0),j=Object(r.createContext)({user:"loading"}),f=function(e){var t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(!0),o=Object(m.a)(c,2),i=o[0],l=o[1],d=e.children;return Object(x.jsx)(j.Provider,{value:{user:a,authLoading:i,setUser:s,setAuthLoading:l},children:d})},h=function(e){var t=e.active,n=Object(r.useContext)(j).setUser,a=Object(r.useState)(!1),s=Object(m.a)(a,2),c=s[0],o=s[1],u=Object(r.useState)(!1),b=Object(m.a)(u,2),f=b[0],h=b[1],p=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("auth_token"),n(null);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(r.useState)(!1),O=Object(m.a)(v,2),g=O[0],w=O[1],y=Object(r.useRef)(null),N=function(){y.current&&w(y.current.getBoundingClientRect().top<=0)};return Object(r.useEffect)((function(){return window.addEventListener("scroll",N),function(){window.removeEventListener("scroll",(function(){return N}))}}),[]),Object(x.jsx)("div",{className:"sticky-wrapper".concat(g?" sticky":""," z-50"),ref:y,children:Object(x.jsxs)("nav",{className:"bg-green-500 sticky-inner",children:[Object(x.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8",children:Object(x.jsxs)("div",{className:"relative flex items-center justify-between h-16",children:[Object(x.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:Object(x.jsxs)("button",{type:"button",onClick:function(){return h(!f)},className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",children:[Object(x.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),Object(x.jsx)("svg",{className:"hidden h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),Object(x.jsx)("div",{className:"flex-1 flex items-center justify-center sm:items-stretch sm:justify-start",children:Object(x.jsx)("div",{className:"hidden sm:block sm:ml-6",children:Object(x.jsxs)("div",{className:"flex space-x-4",children:[Object(x.jsx)("div",{className:"bg-clip-text font-extrabold text-transparent bg-gradient-to-r  text-5xl from-purple-400 to-pink-600 font-red",children:"VidPlay"}),Object(x.jsxs)(d.b,{to:"/",className:"home"===t?"bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex","aria-current":"page",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),"Home"]}),Object(x.jsxs)(d.b,{to:"/upload-video",className:"upload-video"===t?"bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Video"]}),Object(x.jsx)(d.b,{to:"/profile",className:"profile"===t?"bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex",children:"Profile"}),Object(x.jsx)(d.b,{to:"/videos",className:"videos"===t?"bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex",children:"Videos"})]})})}),Object(x.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:Object(x.jsxs)("div",{className:"ml-3 relative",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("button",{type:"button",onClick:function(){return o(!c)},className:"bg-gray-800 flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",id:"user-menu-button","aria-expanded":"false","aria-haspopup":"true",children:[Object(x.jsx)("span",{className:"sr-only",children:"Open user menu"}),Object(x.jsx)("img",{className:"h-8 w-8 rounded-full",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1024px-Circle-icons-profile.svg.png",alt:""})]})}),c&&Object(x.jsx)("div",{onClick:function(){return o(!c)},onBlur:function(){return o(!1)},className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:Object(x.jsx)("button",{onClick:function(){return p()},className:"block px-4 py-2 text-sm text-gray-700",role:"menuitem",type:"button",children:"Sign out"})})]})})]})}),f&&Object(x.jsx)("div",{onClick:function(){return h(!f)},onBlur:function(){h(!1)},className:"sm:hidden z-50",id:"mobile-menu",children:Object(x.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[Object(x.jsxs)(d.b,{to:"#",className:"home"===t?"bg-gray-900 text-white block px-3 py-2 rounded-md text-base font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium flex","aria-current":"page",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),"Home"]}),Object(x.jsxs)(d.b,{to:"#",className:"upload-video"===t?"bg-gray-900 text-white block px-3 py-2 rounded-md text-base font-medium flex":"text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium flex",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Video"]})]})})]})})},p=function(e){var t=e.height,n="h-2.5 w-2.5 bg-current   rounded-full";return Object(x.jsx)("div",{className:"flex w-full flex-column justify-center text-center",style:{height:t},children:Object(x.jsxs)("div",{className:"flex justify-center",children:[Object(x.jsx)("div",{className:"".concat(n," mr-1 animate-bounce")}),Object(x.jsx)("div",{className:"".concat(n," mr-1 animate-bounce200")}),Object(x.jsx)("div",{className:"".concat(n," animate-bounce400")})]})})},v=n(16),O=n.n(v),g=function(e){O.a.defaults.headers.common.Authorization=e||""},w={serverURL:"https://testbyashokvideobackend.herokuapp.com/",fileServer:"https://tejavideoapp.s3.amazonaws.com/"},y=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(localStorage.getItem("auth_token")),e.next=4,O.a.get("".concat(w.serverURL).concat(t));case 4:return n=e.sent,e.abrupt("return",{data:n.data.data,isSuccess:n.data.status,status:n.status});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{data:null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message,isSuccess:null===(s=e.t0.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.status,status:null===(o=e.t0.response)||void 0===o?void 0:o.status});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a,s,c,o,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},e.prev=1,g(localStorage.getItem("auth_token")),e.next=5,O.a.post("".concat(w.serverURL).concat(t),n);case 5:return r=e.sent,e.abrupt("return",{data:r.data.data,isSuccess:r.data.status,status:r.status});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{data:null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message,isSuccess:null===(c=e.t0.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.status,status:null===(l=e.t0.response)||void 0===l?void 0:l.status});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a,s,c,o,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},e.prev=1,g(localStorage.getItem("auth_token")),e.next=5,O.a.put("".concat(w.serverURL).concat(t),n);case 5:return r=e.sent,e.abrupt("return",{data:r.data.data,isSuccess:r.data.status,status:r.status});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{data:null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message,isSuccess:null===(c=e.t0.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.status,status:null===(l=e.t0.response)||void 0===l?void 0:l.status});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r){var a,s,c,o,l,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(localStorage.getItem("auth_token")),(a=new FormData).append("image",n),console.log(n),console.log(a),e.next=8,O.a.post("".concat(w.serverURL).concat(t),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r?function(e){r(parseInt(Math.round(100*e.loaded/e.total)))}:null});case 8:return s=e.sent,console.log(s),e.abrupt("return",{data:s.data.data,isSuccess:s.data.status,status:s.status});case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{data:null===(c=e.t0.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message,isSuccess:null===(l=e.t0.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.status,status:null===(u=e.t0.response)||void 0===u?void 0:u.status});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a,s,c,o,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(localStorage.getItem("auth_token")),(r=new FormData).append("image",n),console.log(n),console.log(r),e.next=8,O.a.post("".concat(w.serverURL).concat(t),r,{headers:{"Content-Type":"multipart/form-data"}});case 8:return a=e.sent,console.log(a),e.abrupt("return",{data:a.data.data,isSuccess:a.data.status,status:a.status});case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{data:null===(s=e.t0.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message,isSuccess:null===(o=e.t0.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.status,status:null===(d=e.t0.response)||void 0===d?void 0:d.status});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){return N("auth/register",e)},_=function(e){return N("auth/login",e)},I=function(e,t){return k("user/update/".concat(e),t)},R=function(e){return C("upload-file",e)},D=function(e,t){return S("upload-file",e,t)},G=function(e){return N("video/create",e)},P=function(e){return N("video",e)},H=function(e){return y("video/".concat(e))},L=function(e,t){return N("video/unlike/".concat(e,"/").concat(t))},B=function(e,t){return N("video/removedislike/".concat(e,"/").concat(t))},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return N("comment/reply/".concat(e,"/").concat(t),n)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N("comment/deleteReply/".concat(e),t)},A=function(e){return N("video/update",e)},F=n(26),U=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:Object(x.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),V=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"#FFD700",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:Object(x.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),z=function(e){var t=e.video;return Object(x.jsxs)("div",{className:" rounded overflow-hidden border w-full bg-white ",children:[Object(x.jsx)("div",{className:"w-full h-thumb bg-cover overflow-hidden",style:{backgroundImage:"url(".concat(w.fileServer+(null===t||void 0===t?void 0:t.thumbnail),")")}}),Object(x.jsx)("div",{className:"px-2 my-2 text-left",children:Object(x.jsx)("div",{className:"w-full flex justify-between ",children:Object(x.jsx)("div",{className:"flex",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"ml-2 font-bold text-sm block",children:null===t||void 0===t?void 0:t.title}),t.ratings&&t.ratings.length>0&&Object(x.jsx)(F.a,{emptySymbol:U,fullSymbol:V,initialRating:t.ratings.reduce((function(e,t){return e+t.rating}),0)/t.ratings.length,readonly:!0})]})})})})]})},q=function(e){e.history;var t=Object(r.useContext)(j),n=t.user,a=t.authLoading,s=Object(r.useState)([]),c=Object(m.a)(s,2),o=c[0],f=c[1],v=Object(r.useState)([]),O=Object(m.a)(v,2),g=O[0],w=O[1],y=Object(r.useState)(!0),N=Object(m.a)(y,2),k=N[0],S=N[1],C=Object(r.useState)("All"),T=Object(m.a)(C,2),_=T[0],I=T[1],R=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if((t=e.sent)&&t.isSuccess){for(n=[],r=0;r<t.data.videos.length;r++)for(a=t.data.videos[r].categories,s=0;s<a.length;s++)n.some((function(e){return e.category===a[s]}))||n.push({category:a[s]});for(r=0;r<t.data.videos.length;r++)for(a=t.data.videos[r].categories,s=0;s<n.length;s++)a.includes(n[s].category)&&((c=n[s].videos?n[s].videos:[]).push(t.data.videos[r]),n[s].videos=c);f(n),w(n)}S(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){R()}),[]),a||n?Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)(h,{active:"home"}),Object(x.jsxs)("div",{className:"py-5 px-8",children:[Object(x.jsxs)("div",{className:"mx-auto mt-4 block lg:flex flex-row text-center",children:[Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){w(o),I("All")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("All"==_?"bg-gray-200":"bg-white"),children:"All"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Fiction"==e.category})),w(e),I("Fiction")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Fiction"==_?"bg-gray-200":"bg-white"),children:"Fiction"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Romance"==e.category})),w(e),I("Romance")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Romance"==_?"bg-gray-200":"bg-white"),children:"Romance"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Rom-Com"==e.category})),w(e),I("Rom-Com")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Rom-Com"==_?"bg-gray-200":"bg-white"),children:"Rom-Com"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Thriller"==e.category})),w(e),I("Thriller")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Thriller"==_?"bg-gray-200":"bg-white"),children:"Thriller"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Adventure"==e.category})),w(e),I("Adventure")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Adventure"==_?"bg-gray-200":"bg-white"),children:"Adventure"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Horror"==e.category})),w(e),I("Horror")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Horror"==_?"bg-gray-200":"bg-white"),children:"Horror"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return"Comedy"==e.category})),w(e),I("Comedy")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Comedy"==_?"bg-gray-200":"bg-white"),children:"Comedy"})})]}),Object(x.jsxs)("div",{className:"max-w-7xl text-center",children:[Object(x.jsx)("h2",{className:"text-7xl text-black"}),k&&Object(x.jsx)(p,{height:"90vh"}),!k&&g.map((function(e,t){return Object(x.jsxs)("div",{className:"mb-4 py-5",children:["All"==_&&Object(x.jsx)("h2",{className:"text-4xl font-bold text-black mb-4 text-left",children:e.category}),Object(x.jsx)("div",{className:"w-full overflow-x-auto overflow-y-hidden",children:Object(x.jsx)("table",{children:Object(x.jsx)("tbody",{children:Object(x.jsx)("tr",{children:e.videos&&e.videos.length>0&&e.videos.map((function(e){return Object(x.jsx)("td",{className:"pr-4",children:Object(x.jsx)(d.b,{to:"video/".concat(e.slug),children:Object(x.jsx)(z,{video:e})})})}))})})})})]})}))]})]})]}):Object(x.jsx)(u.a,{to:"/login"})},W=n(45),Y=n(46),J=n(54),K=n(53),Q=function(e){Object(J.a)(n,e);var t=Object(K.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return Object(x.jsx)(a.a.Fragment,{})}}]),n}(r.Component),X=Object(u.g)(Q),Z=n(30),$=n(4),ee=n(47),te=n.n(ee),ne=function(e){var t=Object(r.useContext)(j).setUser,n=e.history,a=e.location,s=Object(r.useState)(!1),c=Object(m.a)(s,2),o=c[0],d=c[1],u=te.a.parse(a.search).redirect,b=function(){var e=Object(l.a)(i.a.mark((function e(r){var a,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!r.target.email.value||!r.target.password.value){e.next=15;break}return d(!0),a={email:r.target.email.value,password:r.target.password.value},e.prev=4,e.next=7,_(a);case 7:(s=e.sent)&&s.isSuccess?($.b.success("Login Success!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),c=s.data.token,localStorage.setItem("auth_token",c),g(c),o=Object(Z.a)(c),t(o),n.push(u||"/")):$.b.error("".concat(s.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),$.b.error("Network Error!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 14:d(!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"bg-gradient-to-r from-sky-400 via-rose-400 to-lime-400 w-96 shadow-xl rounded p-5",children:[Object(x.jsx)("h1",{className:"text-3xl font-medium",children:"Sign In"}),Object(x.jsx)("p",{className:"text-sm",children:"Enter your email and password!"}),Object(x.jsxs)("form",{className:"space-y-5 mt-5",onSubmit:b,children:[Object(x.jsx)("input",{type:"text",autocomplete:"email",name:"email",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Email",required:!0}),Object(x.jsx)("input",{type:"password",autocomplete:"password",name:"password",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Password",required:!0}),Object(x.jsxs)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:o,children:[Object(x.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:Object(x.jsx)("svg",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})})}),o?"LOADING":"Sign in"]})]})]})},re=function(e){var t=e.toogleRegister,n=Object(r.useState)(!1),a=Object(m.a)(n,2),s=a[0],c=a[1],o=function(){var e=Object(l.a)(i.a.mark((function e(n){var r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(n.target.email.value&&n.target.password.value&&n.target.name.value)){e.next=9;break}return c(!0),r={name:n.target.name.value,email:n.target.email.value,password:n.target.password.value},e.next=6,T(r);case 6:(a=e.sent)&&a.isSuccess?($.b.success("Registration Success! Please Login",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),t()):$.b.error("".concat(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),c(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"bg-conic-to-r from-red-900 via-violet-200 to-orange-500 w-96 shadow-xl rounded p-5",children:[Object(x.jsx)("h1",{className:"text-3xl font-medium",children:"Register"}),Object(x.jsx)("p",{className:"text-sm",children:"Enter all the information and get started!"}),Object(x.jsxs)("form",{className:"space-y-5 mt-5",onSubmit:o,children:[Object(x.jsx)("input",{type:"text",required:!0,autocomplete:"name",name:"name",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Full Name"}),Object(x.jsx)("input",{type:"text",required:!0,autocomplete:"email",name:"email",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Email"}),Object(x.jsx)("input",{type:"password",required:!0,autocomplete:"password",name:"password",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Password"}),Object(x.jsxs)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:s,children:[Object(x.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:Object(x.jsx)("svg",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})})}),s?"LOADING":"Register"]})]})]})},ae=function(e){var t=e.history,n=e.location,a=Object(r.useContext)(j),s=a.user,c=a.authLoading,o=Object(r.useState)(!1),i=Object(m.a)(o,2),l=i[0],d=i[1],b=function(){d(!l)};return!c&&s?Object(x.jsx)(u.a,{to:"/"}):Object(x.jsx)("div",{className:"overflow-hidden flex items-center justify-center bg-gradient-to-r from-green-300 to-red-400",children:Object(x.jsxs)("div",{className:" h-screen flex flex-col space-y-10 justify-center items-center ",children:[l?Object(x.jsx)(re,{toogleRegister:b}):Object(x.jsx)(ne,{history:t,location:n}),Object(x.jsxs)("p",{children:[l?"Already Have an ID ":"New User"," ?",Object(x.jsxs)("a",{href:"#!",onClick:b,className:"text-blue-700 font-medium",children:[" ",l?"Login":"Register"]})]})]})})},se=(n(90),n(48)),ce=n(49),oe=n(15),ie=n.n(oe),le=function(e){var t=e.video;return Object(x.jsxs)("div",{className:" rounded overflow-hidden border w-full bg-white ",children:[Object(x.jsx)("div",{className:"w-full h-thumb bg-cover overflow-hidden",style:{backgroundImage:"url(".concat(w.fileServer+(null===t||void 0===t?void 0:t.thumbnail),")")}}),Object(x.jsx)("div",{className:"px-2 my-2 text-left",children:Object(x.jsx)("div",{className:"w-full flex justify-between ",children:Object(x.jsxs)("div",{className:"flex flex-column",children:[Object(x.jsx)(d.b,{to:"video/".concat(t.slug),children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"ml-2 font-bold text-xl block mb-2",children:null===t||void 0===t?void 0:t.title}),Object(x.jsxs)("p",{className:"ml-2 text-sm block text-black mb-2",children:[Object(x.jsx)("span",{className:"font-bold",children:"Description: "}),null===t||void 0===t?void 0:t.description]}),Object(x.jsxs)("p",{className:"ml-2 text-sm block text-black mb-2",children:[Object(x.jsx)("span",{className:"font-bold",children:"Categories: "}),null===t||void 0===t?void 0:t.categories.join(", ")]})]})}),Object(x.jsxs)("div",{className:"flex mx-2 flex-row justify-around mt-4",children:[Object(x.jsx)(d.b,{to:"/edit-video/"+t.slug,children:Object(x.jsx)(ie.a,{className:"cursor-pointer",icon:se.edit})}),Object(x.jsx)(ie.a,{className:"cursor-pointer",onClick:function(){var e;(e={videoId:t._id},N("video/delete",e)).then((function(e){console.log("res",e),e&&e.isSuccess&&($.b.success("Your video has been deleted"),setTimeout((function(){window.location.reload()}),1e3))})).catch((function(e){$.b.error("Your video could not be deleted")}))},icon:ce.trash})]})]})})})]})},de=function(){var e=Object(r.useContext)(j),t=e.user,n=e.authLoading,a=Object(r.useState)(null),s=Object(m.a)(a,2),c=s[0],o=s[1],d=Object(r.useState)(null),b=Object(m.a)(d,2),f=b[0],v=b[1],O=Object(r.useState)(!1),g=Object(m.a)(O,2),w=g[0],k=g[1],S=Object(r.useState)(!1),C=Object(m.a)(S,2),T=C[0],_=C[1],D=Object(r.useState)(!1),G=Object(m.a)(D,2),P=G[0],H=G[1],L=Object(r.useState)(!0),B=Object(m.a)(L,2),M=B[0],E=B[1],A=Object(r.useState)([]),F=Object(m.a)(A,2),U=F[0],V=F[1],z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),n=t.target.files,e.prev=2,e.next=5,R(n[0]);case 5:(r=e.sent)&&r.isSuccess&&v(r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.status;case 12:H(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),_(!0),r={name:n.target.name.value,email:n.target.email.value,photo:f},e.next=5,I(t._id,r);case 5:(a=e.sent)&&a.isSuccess?(o(a.data.user),v(a.data.user.photo),$.b.success("Profile Update!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3})):$.b.error("".concat(a.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),_(!1),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e;Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=null===t||void 0===t?void 0:t._id,y("user/".concat(a));case 2:(n=e.sent)&&n.isSuccess&&(o(n.data.user),v(null===(r=n.data.user)||void 0===r?void 0:r.photo)),E(!1);case 5:case"end":return e.stop()}var a}),e)})))(),t&&(e={userId:t._id},N("video/user",e)).then((function(e){e&&e.isSuccess&&V(e.data.videos)})).catch((function(e){}))}),[t]),n||t?Object(x.jsxs)("div",{children:[Object(x.jsx)(h,{active:"profile"}),Object(x.jsx)("div",{className:"container mx-auto px-4 pt-6",children:Object(x.jsxs)("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg",children:[M?Object(x.jsx)(p,{height:"30vh"}):Object(x.jsxs)("div",{className:"px-6",children:[Object(x.jsx)("div",{className:"w-full px-4 lg:order-3 lg:text-right lg:self-center pt-4",children:Object(x.jsx)("button",{className:"".concat(w?"bg-gray-400":"bg-gray-800"," uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none mb-1 ease-linear transition-all duration-150"),type:"button",onClick:function(){k(!w)},disabled:T,children:"Edit"})}),Object(x.jsxs)("div",{className:"flex flex-wrap justify-center",children:[Object(x.jsx)("div",{className:"w-full lg:w-3/12 px-4 flex justify-center",children:Object(x.jsxs)("div",{className:"relative",children:[Object(x.jsx)("img",{alt:"User",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1024px-Circle-icons-profile.svg.png",className:"shadow-xl rounded-full h-auto align-middle border-none",style:{maxWidth:"150px"}}),w&&Object(x.jsx)("div",{className:"py-6 px-3 mt-32 sm:mt-0",children:P?"Uploading, Please Wait...":Object(x.jsx)("div",{className:"custom-file mb-4",children:Object(x.jsx)("input",{type:"file",className:"custom-file-input br-0",id:"customFile",onChange:z})})})]})}),w?Object(x.jsx)("div",{className:"w-full lg:w-4/12 px-4 lg:order-3 lg:text-left lg:self-center",children:Object(x.jsxs)("form",{onSubmit:q,children:[Object(x.jsxs)("h3",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Name"}),Object(x.jsx)("input",{type:"text",autocomplete:"email",name:"name",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Name",required:!0,defaultValue:null===c||void 0===c?void 0:c.name})]}),Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Email"}),Object(x.jsx)("input",{type:"text",autocomplete:"email",name:"email",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Email",required:!0,defaultValue:null===c||void 0===c?void 0:c.email})]}),Object(x.jsx)("button",{className:"w-100 ".concat(T?"bg-gray-400":"bg-gray-800"," uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none mb-1 ease-linear transition-all duration-150"),type:"submit",disabled:T,children:T?"Saving":"Save"})]})}):Object(x.jsxs)("div",{className:"w-full lg:w-4/12 px-4 lg:order-3 lg:text-left lg:self-center",children:[Object(x.jsx)("h3",{className:"text-4xl font-semibold leading-normal mb-2 text-blueGray-700",children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold",children:null===c||void 0===c?void 0:c.email})]})]}),Object(x.jsx)("div",{className:"text-center mt-12"})]}),Object(x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-4 px-4 mb-4",children:U&&U.length>0&&U.map((function(e,t){return Object(x.jsx)(le,{video:e})}))})]})})]}):Object(x.jsx)(u.a,{to:"/login"})},ue=function(e){var t=e.progressPercentage;return Object(x.jsxs)("div",{className:"h-2 w-full bg-gray-300",children:[Object(x.jsx)("div",{style:{width:"".concat(t,"%")},className:"h-full mb-2 ".concat(t<70?"bg-red-600":"bg-green-600")}),Object(x.jsx)("div",{className:"w-full text-gray-800 text-center",children:Object(x.jsxs)("h4",{className:"font-bold",children:[t,"%"]})})]})},be=n(23),me=n(24),xe=function(e){var t=e.history,n=Object(r.useContext)(j),a=n.user,s=n.authLoading,c=Object(r.useState)(""),o=Object(m.a)(c,2),d=o[0],f=o[1],p=Object(r.useState)(""),v=Object(m.a)(p,2),O=v[0],g=v[1],y=Object(r.useState)(!1),N=Object(m.a)(y,2),k=N[0],S=N[1],C=Object(r.useState)(!1),T=Object(m.a)(C,2),_=T[0],I=T[1],P=Object(r.useState)(!1),H=Object(m.a)(P,2),L=H[0],B=H[1],M=Object(r.useState)(0),E=Object(m.a)(M,2),A=E[0],F=E[1],U=Object(r.useState)(!1),V=Object(m.a)(U,2),z=V[0],q=V[1],W=Object(r.useState)([]),Y=Object(m.a)(W,2),J=Y[0],K=Y[1];if(!s&&!a)return Object(x.jsx)(u.a,{to:"/login"});var Q=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),n=t.target.files,e.prev=2,e.next=5,D(n[0],F);case 5:r=e.sent,console.log(r),r&&r.isSuccess&&f(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),500===e.t0.response.status?console.log("There was a problem with the server"):console.log(e.t0.response.data.msg);case 13:I(!1),F(0);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),n=t.target.files,e.prev=2,e.next=5,R(n[0]);case 5:r=e.sent,console.log(r),r&&r.isSuccess&&g(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),500===e.t0.response.status?console.log("There was a problem with the server"):console.log(e.t0.response.data.msg);case 13:B(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(i.a.mark((function e(n){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!d||!O){e.next=12;break}return S(!0),r={title:n.target.title.value,description:n.target.description.value,video:d,thumbnail:O,user:null===a||void 0===a?void 0:a._id,categories:J},e.next=6,G(r);case 6:(s=e.sent)&&s.isSuccess?($.b.success("Video Uploaded!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),t.push("/")):$.b.error("".concat(s.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),console.log(s),S(!1),e.next=13;break;case 12:$.b.error("Please Upload Video and Thumbnail!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(h,{active:"upload-video"}),Object(x.jsx)("div",{className:"container mx-auto px-4 pt-6",children:Object(x.jsx)("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg",children:Object(x.jsxs)("div",{className:"p-2",children:[Object(x.jsxs)("div",{className:"flex flex-wrap justify-center",children:[Object(x.jsx)("div",{className:"w-full sm:w-full lg:w-6/12 p-4 justify-center",children:Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsxs)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:[" ","Video"]}),d&&Object(x.jsx)("video",{style:{width:"100%"},src:"".concat(w.fileServer).concat(d),controls:!0}),Object(x.jsx)("div",{className:"py-2",children:_?Object(x.jsx)(ue,{progressPercentage:A}):Object(x.jsx)("div",{className:"custom-file mb-4",children:Object(x.jsx)("input",{type:"file",className:"custom-file-input br-0",id:"customFile",onChange:Q})})})]})}),Object(x.jsx)("div",{className:"w-full sm:w-full lg:w-6/12 p-4 justify-center",children:Object(x.jsxs)("form",{onSubmit:Z,children:[Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Title"}),Object(x.jsx)("input",{type:"text",name:"title",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Video Title",required:!0})]}),Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Description"}),Object(x.jsx)("textarea",{rows:10,required:!0,type:"text",name:"description",className:"w-full p-2 border border-gray-800 rounded",placeholder:"Video Description"})]}),Object(x.jsxs)("div",{class:"relative inline-block text-left w-full cursor-pointer",children:[Object(x.jsx)("div",{onClick:function(){q(!z)},children:Object(x.jsxs)("button",{type:"button",class:"inline-flex justify-center w-full min-w-full rounded-md border border-gray-800 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mb-4",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:[0==J.length?"Category":J.join(", "),Object(x.jsx)(ie.a,{className:"h-4 w-4 ml-2",icon:z?me.ic_arrow_drop_up:be.ic_arrow_drop_down})]})}),z&&Object(x.jsx)("div",{class:"origin-top-right absolute right-0 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none w-full max-h-44 overflow-y-scroll",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",children:Object(x.jsx)("div",{class:"py-1",role:"none",children:["Fiction","Romance","Rom-Com","Thriller","Adventure","Horror","Comedy"].map((function(e,t){return Object(x.jsxs)("div",{class:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",id:"menu-item-2",onClick:function(){var t=Object(b.a)(J);console.log("selected",t),J.some((function(t){return t==e}))?t=t.filter((function(t){return t!=e})):t.push(e),K(t)},children:[Object(x.jsx)("input",{class:"form-check-input h-4 w-4 border border-gray-600 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer",type:"checkbox",value:"",id:"flexCheckDefault",checked:J.some((function(t){return t==e}))}),Object(x.jsx)("label",{class:"form-check-label inline-block text-gray-800",for:"flexCheckDefault",children:e})]},t)}))})})]}),Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Thumbnail"}),O&&Object(x.jsx)("img",{alt:"User",src:w.fileServer+O,className:"w-full shadow-xl h-auto align-middle border-none mb-2"}),Object(x.jsx)("div",{className:"",children:L?"Uploading, Please Wait...":Object(x.jsx)("div",{className:"custom-file mb-4",children:Object(x.jsx)("input",{type:"file",className:"custom-file-input br-0",id:"customFile",onChange:X})})})]}),Object(x.jsx)("button",{className:"w-100 ".concat(k?"bg-gray-400":"bg-gray-800"," uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none mb-1 ease-linear transition-all duration-150"),type:"submit",disabled:k,children:k?"Saving":"Save"})]})})]}),Object(x.jsx)("div",{className:"text-center mt-12"})]})})})]})},je=function(e){var t=Object(r.useContext)(j),n=t.user,a=t.authLoading,s=Object(r.useState)(""),c=Object(m.a)(s,2),o=c[0],d=c[1],f=Object(r.useState)(""),p=Object(m.a)(f,2),v=p[0],O=p[1],g=Object(r.useState)(!1),y=Object(m.a)(g,2),N=y[0],k=y[1],S=Object(r.useState)(!1),C=Object(m.a)(S,2),T=C[0],_=C[1],I=Object(r.useState)(!1),G=Object(m.a)(I,2),P=G[0],L=G[1],B=Object(r.useState)(0),M=Object(m.a)(B,2),E=M[0],F=M[1],U=Object(r.useState)(!1),V=Object(m.a)(U,2),z=V[0],q=V[1],W=Object(r.useState)([]),Y=Object(m.a)(W,2),J=Y[0],K=Y[1],Q=e.match.params.slug;if(Object(r.useEffect)((function(){H(Q).then((function(e){e&&e.isSuccess&&(d(e.data.video),K(e.data.video.categories),O(e.data.video.thumbnail))}))}),[]),!a&&!n)return Object(x.jsx)(u.a,{to:"/login"});var X=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),n=t.target.files,e.prev=2,e.next=5,D(n[0],F);case 5:(r=e.sent)&&r.isSuccess&&d(r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.status;case 12:_(!1),F(0);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),n=t.target.files,e.prev=2,e.next=5,R(n[0]);case 5:r=e.sent,console.log(r),r&&r.isSuccess&&O(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),500===e.t0.response.status?console.log("There was a problem with the server"):console.log(e.t0.response.data.msg);case 13:L(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var t=Object(l.a)(i.a.mark((function t(r){var a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),!o||!v){t.next=12;break}return k(!0),a={title:r.target.title.value,description:r.target.description.value,video:o,thumbnail:v,user:null===n||void 0===n?void 0:n._id,categories:J},t.next=6,A({id:o._id,data:a});case 6:(s=t.sent)&&s.isSuccess?($.b.success("Video Uploaded!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),e.history.push("/")):$.b.error("".concat(s.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),console.log(s),k(!1),t.next=13;break;case 12:$.b.error("Please Upload Video and Thumbnail!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(h,{active:"upload-video"}),Object(x.jsx)("div",{className:"container mx-auto px-4 pt-6",children:Object(x.jsx)("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg",children:Object(x.jsxs)("div",{className:"p-2",children:[Object(x.jsxs)("div",{className:"flex flex-wrap justify-center",children:[Object(x.jsx)("div",{className:"w-full sm:w-full lg:w-6/12 p-4 justify-center",children:Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsxs)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:[" ","Video"]}),o&&Object(x.jsx)("video",{style:{width:"100%"},src:"".concat(w.fileServer).concat(o.video),controls:!0}),Object(x.jsx)("div",{className:"py-2",children:T?Object(x.jsx)(ue,{progressPercentage:E}):Object(x.jsx)("div",{className:"custom-file mb-4",children:Object(x.jsx)("input",{type:"file",className:"custom-file-input br-0",id:"customFile",onChange:X})})})]})}),Object(x.jsx)("div",{className:"w-full sm:w-full lg:w-6/12 p-4 justify-center",children:Object(x.jsxs)("form",{onSubmit:ee,children:[Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Title"}),Object(x.jsx)("input",{type:"text",name:"title",className:"w-full h-10 border border-gray-800 rounded px-3",placeholder:"Video Title",defaultValue:o.title,required:!0})]}),Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-4 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Description"}),Object(x.jsx)("textarea",{rows:10,required:!0,type:"text",defaultValue:o.description,name:"description",className:"w-full p-2 border border-gray-800 rounded",placeholder:"Video Description"})]}),Object(x.jsxs)("div",{class:"relative inline-block text-left w-full cursor-pointer",children:[Object(x.jsx)("div",{onClick:function(){q(!z)},children:Object(x.jsxs)("button",{type:"button",class:"inline-flex justify-center w-full min-w-full rounded-md border border-gray-800 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mb-4",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:[0==J.length?"Category":J.join(", "),Object(x.jsx)(ie.a,{className:"h-4 w-4 ml-2",icon:z?me.ic_arrow_drop_up:be.ic_arrow_drop_down})]})}),z&&Object(x.jsx)("div",{class:"origin-top-right absolute right-0 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none w-full max-h-44 overflow-y-scroll",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",children:Object(x.jsx)("div",{class:"py-1",role:"none",children:["Fiction","Romance","Rom-Com","Thriller","Adventure","Horror","Comedy"].map((function(e,t){return Object(x.jsxs)("div",{class:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",id:"menu-item-2",onClick:function(){var t=Object(b.a)(J);J.some((function(t){return t==e}))?t=t.filter((function(t){return t!=e})):t.push(e),K(t)},children:[Object(x.jsx)("input",{class:"form-check-input h-4 w-4 border border-gray-600 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer",type:"checkbox",value:"",id:"flexCheckDefault",checked:J.some((function(t){return t==e}))}),Object(x.jsx)("label",{class:"form-check-label inline-block text-gray-800",for:"flexCheckDefault",children:e})]},t)}))})})]}),Object(x.jsxs)("div",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold",children:[Object(x.jsx)("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"grid-password",children:"Thumbnail"}),v&&Object(x.jsx)("img",{alt:"User",src:w.fileServer+v,className:"w-full shadow-xl h-auto align-middle border-none mb-2"}),Object(x.jsx)("div",{className:"",children:P?"Uploading, Please Wait...":Object(x.jsx)("div",{className:"custom-file mb-4",children:Object(x.jsx)("input",{type:"file",className:"custom-file-input br-0",id:"customFile",onChange:Z})})})]}),Object(x.jsx)("button",{className:"w-100 ".concat(N?"bg-gray-400":"bg-gray-800"," uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none mb-1 ease-linear transition-all duration-150"),type:"submit",disabled:N,children:N?"Saving":"Save"})]})})]}),Object(x.jsx)("div",{className:"text-center mt-12"})]})})})]})},fe=n(32),he=function(e){var t=e.videoData,n=e.dispatchComments,a=Object(r.useState)(""),s=Object(m.a)(a,2),c=s[0],o=s[1],d=Object(r.useState)(!0),u=Object(m.a)(d,2),b=u[0],f=u[1],h=Object(r.useState)(!1),p=Object(m.a)(h,2),v=p[0],O=p[1],g=Object(r.useContext)(j).user;Object(r.useEffect)((function(){return c.trim().length>0?f(!1):f(!0),function(){f(!0)}}),[c]),Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,i=t._id,l={text:c,userID:g._id},N("comment/".concat(i),l);case 3:(r=e.sent)&&r.isSuccess?(a=Object(fe.a)({},r.data.result),s=Object(fe.a)(Object(fe.a)({},r.data.result.user),g),a.user=s,console.log(a),o(""),n({type:"create",payload:a})):$.b.error("".concat(r.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 5:case"end":return e.stop()}var i,l}),e)})))(),function(){O(!1)}}),[v,t,c,g]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("form",{className:"w-full max-w-xxl",onSubmit:function(e){e.preventDefault(),o(c.trim()),O(!0)},children:Object(x.jsxs)("div",{className:"py-2",children:[Object(x.jsx)("div",{className:"md:w-2/3 mb-2",children:Object(x.jsx)("textarea",{className:"bg-gray-200 appearance-none border-b-2 rounded w-full py-2 px-2 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-full-name",type:"text",placeholder:"Add a comment",value:c,onChange:function(e){o(e.target.value)}})}),Object(x.jsxs)("div",{className:"inline-flex",children:[Object(x.jsx)("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 mr-1 rounded ".concat(b&&"cursor-not-allowed"),disabled:b,children:"Submit"}),Object(x.jsx)("button",{className:"bg-gray-900 hover:bg-gray-700 text-white font-bold py-2 px-4 mr-1 rounded",type:"reset",onClick:function(){o("")},children:"Cancel"})]})]})})})},pe=n(31),ve=n.n(pe),Oe=function(e){var t=e.icon,n=e.text,r=e.onClick,a=void 0===r?function(){}:r;return Object(x.jsxs)("button",{className:"bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded inline-flex items-center text-xs mr-2",onClick:a,children:[Object(x.jsx)("i",{className:"".concat(t," mr-1")}),Object(x.jsx)("span",{children:n})]})},ge=function(e){var t,n,a,s=e.comment,c=e.reply,o=e.dispatchComments,d=Object(r.useContext)(j).user,u=Object(r.useState)(!1),b=Object(m.a)(u,2),f=b[0],h=b[1],p=Object(r.useState)(null===c||void 0===c||null===(t=c.text)||void 0===t?void 0:t.trim()),v=Object(m.a)(p,2),O=v[0],g=v[1],w=Object(r.useState)(!1),y=Object(m.a)(w,2),k=y[0],S=y[1],C=Object(r.useState)(!1),T=Object(m.a)(C,2),_=T[0],I=T[1];return Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=6;break}return e.next=3,E(d._id,{commentID:s._id,replyID:c._id});case 3:(t=e.sent)&&t.isSuccess?(n=t.data.result,o({type:"update",payload:n})):$.b.error("Could not delete the comment!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),S(!1);case 6:case"end":return e.stop()}}),e)})))(),function(){S(!1)}}),[k,d,s,c]),Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=6;break}return e.next=3,r=d._id,a={replyID:c._id,text:O},N("comment/updateReply/".concat(r),a);case 3:t=e.sent,I(!1),t&&t.isSuccess?(console.log(t.data.result),h(!1),o({type:"update",payload:t.data.result})):(g(null===c||void 0===c||null===(n=c.text)||void 0===n?void 0:n.trim()),$.b.error("Could not update the reply!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}));case 6:case"end":return e.stop()}var r,a}),e)})))(),function(){I(!1)}}),[_,O,c,d]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"mt-1",children:[Object(x.jsxs)("div",{className:"reply-meta",children:[Object(x.jsx)("span",{className:"text-base mr-2 font-bold",children:null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.name}),Object(x.jsx)("span",{className:"text-xs",children:ve()(c.createdAt).startOf("minute").fromNow()})]}),!f&&Object(x.jsx)("pre",{className:"reply-body w-100",style:{minHeight:"auto",fontFamily:"inherit"},children:null===c||void 0===c||null===(a=c.text)||void 0===a?void 0:a.trim().split("")}),f&&Object(x.jsx)("textarea",{className:"p-1 border rounded w-50",value:O,onChange:function(e){g(e.target.value)}}),Object(x.jsx)("div",{children:d._id===c.user._id?Object(x.jsxs)(x.Fragment,{children:[!f&&Object(x.jsx)(Oe,{icon:"bx bx-edit-alt",text:"Edit",onClick:function(){h(!0)}}),f&&Object(x.jsx)(Oe,{icon:"bx bx-check-circle",text:"Save",onClick:function(){I(!0)}}),Object(x.jsx)(Oe,{icon:"bx bx-trash",text:"Delete",onClick:function(){S(!0)}})]}):null})]})})},we=function(e){var t=e.comment,n=e.dispatchComments,a=e.setShowReplyBox,s=Object(r.useState)(""),c=Object(m.a)(s,2),o=c[0],d=c[1],u=Object(r.useState)(!0),b=Object(m.a)(u,2),f=b[0],h=b[1],p=Object(r.useState)(!1),v=Object(m.a)(p,2),O=v[0],g=v[1],w=Object(r.useContext)(j).user,y=Object(r.useRef)();Object(r.useEffect)((function(){y.current.focus()}),[]),Object(r.useEffect)((function(){return o.trim().length>0?h(!1):h(!0),function(){h(!0)}}),[o]),Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=7;break}return console.log("should reply"),e.next=4,M(t._id,w._id,{text:o});case 4:(r=e.sent)&&r.isSuccess?(a=r.data.result,d(""),n({type:"update",payload:a})):$.b.error("".concat(r.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}),g(!1);case 7:case"end":return e.stop()}}),e)})))(),function(){g(!1)}}),[O,t,o,w]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("form",{className:"w-full max-w-xxl",onSubmit:function(e){e.preventDefault(),d(o.trim()),g(!0)},children:Object(x.jsxs)("div",{className:"py-2",children:[Object(x.jsx)("div",{className:"md:w-2/3 mb-2",children:Object(x.jsx)("textarea",{className:"bg-gray-200 appearance-none border-b-2 rounded w-full py-2 px-2 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-full-name",type:"text",placeholder:"Add a reply",value:o,ref:y,onChange:function(e){d(e.target.value)}})}),Object(x.jsxs)("div",{className:"inline-flex",children:[Object(x.jsx)("button",{type:"submit",className:"bg-green-500 text-white font-bold py-1 px-2 rounded inline-flex items-center text-xs mr-2",disabled:f,children:"Submit"}),Object(x.jsx)("button",{type:"reset",className:"bg-gray-900 text-white font-bold py-1 px-2 rounded inline-flex items-center text-xs mr-2",onClick:function(){d(""),a(!1)},children:"Cancel"})]})]})})})},ye=n(116),Ne=function(e){var t,n,a,s,c=e.comment,o=e.dispatchComments,d=Object(r.useContext)(j).user,u=Object(r.useState)(!1),b=Object(m.a)(u,2),f=b[0],h=b[1],p=Object(r.useState)(!1),v=Object(m.a)(p,2),O=v[0],g=v[1],w=Object(r.useState)(!1),y=Object(m.a)(w,2),k=y[0],S=y[1],C=Object(r.useState)(null===c||void 0===c||null===(t=c.text)||void 0===t?void 0:t.trim()),T=Object(m.a)(C,2),_=T[0],I=T[1],R=Object(r.useState)(!1),D=Object(m.a)(R,2),G=D[0],P=D[1];return Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=5;break}return e.next=3,n=c._id,r=d._id,N("comment/delete/".concat(n,"/").concat(r));case 3:(t=e.sent)&&t.isSuccess?o({type:"delete",commentID:c._id}):$.b.error("Could not delete the comment!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 5:case"end":return e.stop()}var n,r}),e)})))(),function(){h(!1)}}),[f,c,d]),Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=6;break}return e.next=3,r=c._id,a=d._id,s={text:_},N("comment/update/".concat(r,"/").concat(a),s);case 3:t=e.sent,P(!1),t&&t.isSuccess?(console.log(t.data.result),S(!1),o({type:"update",payload:t.data.result})):(I(null===c||void 0===c||null===(n=c.text)||void 0===n?void 0:n.trim()),$.b.error("Could not update the comment!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3}));case 6:case"end":return e.stop()}var r,a,s}),e)})))(),function(){P(!1)}}),[G,c,d,_]),Object(x.jsxs)("div",{className:"my-4",children:[Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("span",{className:"text-base mr-2 font-bold",children:null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.name}),Object(x.jsx)("span",{className:"text-xs",children:ve()(c.createdAt).startOf("minute").fromNow()})]}),Object(x.jsxs)("div",{children:[!k&&Object(x.jsx)("pre",{className:"w-100",style:{minHeight:"auto",fontFamily:"inherit"},children:null===c||void 0===c||null===(a=c.text)||void 0===a?void 0:a.trim()}),k&&Object(x.jsx)("textarea",{className:"p-1 border rounded w-50",value:_,onChange:function(e){I(e.target.value)}})]}),Object(x.jsxs)("div",{className:"my-1",children:[Object(x.jsx)(Oe,{icon:"bx bx-reply",text:"Reply",onClick:function(){g((function(e){return!e}))}}),d._id===c.user._id?Object(x.jsxs)(x.Fragment,{children:[!k&&Object(x.jsx)(Oe,{icon:"bx bx-edit-alt",text:"Edit",onClick:function(){S(!0)}}),k&&Object(x.jsx)(Oe,{icon:"bx bx-check-circle",text:"Save",onClick:function(){P(!0)}}),Object(x.jsx)(Oe,{icon:"bx bx-trash",text:"Delete",onClick:function(){h(!0)}})]}):null]}),Object(x.jsxs)("div",{className:"pl-4 mt-2",children:[O&&Object(x.jsx)(we,{comment:c,dispatchComments:o,setShowReplyBox:g}),null===c||void 0===c||null===(s=c.replies)||void 0===s?void 0:s.map((function(e){return Object(x.jsx)(ge,{reply:e,comment:c,dispatchComments:o},Object(ye.a)())}))]})]})},ke=[],Se=function(e,t){switch(t.type){case"load":return Object(b.a)(t.payload);case"create":return[t.payload].concat(Object(b.a)(e));case"update":return e.map((function(e){return e._id.toString()!==t.payload._id.toString()?e:t.payload}));case"delete":return e.filter((function(e){return e._id.toString()!==t.commentID.toString()}));case"unload":return[];default:return e}},Ce=function(e){var t=e.videoData,n=Object(r.useReducer)(Se,ke),a=Object(m.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(!1),d=Object(m.a)(o,2),u=d[0],b=d[1];return Object(r.useEffect)((function(){return Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=5;break}return e.next=3,a=t._id,y("comment/".concat(a));case 3:(n=e.sent)&&n.isSuccess?(console.log(n.data.result),r=n.data.result,c({type:"load",payload:r}),b(!1)):$.b.error("".concat(n.data.toString(),"!"),{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:3e3});case 5:case"end":return e.stop()}var a}),e)})))(),function(){b(!1)}}),[u,t]),Object(r.useEffect)((function(){return b(!0),function(){b(!1),c({type:"unload"})}}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{className:"text-xl font-semibold",children:"Comments"}),Object(x.jsx)(he,{dispatchComments:c,videoData:t}),s&&s.map((function(e){return Object(x.jsx)(Ne,{comment:e,dispatchComments:c},Object(ye.a)())}))]})},Te=n(50),_e=n(27),Ie=n.n(_e),Re=n(51),De=n(108),Ge=n(109),Pe=n(110),He=n(111),Le=n(112),Be=n(113),Me=n(114),Ee=n(115),Ae=function(e){var t=e.videoData;return Object(x.jsx)(Te.a,{trigger:Object(x.jsx)("span",{className:"mx-2 flex",role:"button",children:Object(x.jsx)("i",{className:"bx bx-share-alt",style:{fontSize:"24px",color:"#000"}})}),modal:!0,nested:!0,children:function(e){return Object(x.jsxs)("div",{className:"".concat(Ie.a.modal),children:[Object(x.jsx)("button",{className:"".concat(Ie.a.close),onClick:e,children:"\xd7"}),Object(x.jsx)("div",{className:"".concat(Ie.a.header),children:" Share video "}),Object(x.jsx)("div",{className:"".concat(Ie.a.content),children:Object(x.jsxs)("div",{className:"d-flex justify-center",children:[Object(x.jsx)("div",{className:"mr-2 d-flex align-items-center bg-slate-700 rounded-full px-1",children:Object(x.jsx)(Re.CopyToClipboard,{text:window.location.href,onCopy:function(){Object($.b)("Copied link to clipboard!",{position:$.b.POSITION.BOTTOM_RIGHT,autoClose:1e3,delay:100}),e()},children:Object(x.jsx)("button",{className:"bx bx-copy text-4xl"})})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(De.a,{url:window.location.href,quote:null===t||void 0===t?void 0:t.title,children:Object(x.jsx)(Ge.a,{size:50,round:!0})})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Pe.a,{url:window.location.href,title:null===t||void 0===t?void 0:t.title,children:Object(x.jsx)(He.a,{size:50,round:!0})})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Le.a,{url:window.location.href,title:null===t||void 0===t?void 0:t.title,children:Object(x.jsx)(Be.a,{size:50,round:!0})})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Me.a,{url:window.location.href,title:null===t||void 0===t?void 0:t.title,summary:null===t||void 0===t?void 0:t.description,children:Object(x.jsx)(Ee.a,{size:50,round:!0})})})]})})]})}})},Fe=function(e){var t,n,a,s,c=e.match,o=Object(r.useState)(!0),d=Object(m.a)(o,2),b=d[0],f=d[1],v=Object(r.useContext)(j),O=v.user,g=v.authLoading,y=Object(r.useState)(null),k=Object(m.a)(y,2),S=k[0],C=k[1],T=Object(r.useState)(!1),_=Object(m.a)(T,2),I=_[0],R=_[1],D=Object(r.useState)(!1),G=Object(m.a)(D,2),P=G[0],M=G[1],E=Object(r.useState)(!1),A=Object(m.a)(E,2),z=A[0],q=A[1],W=Object(r.useState)(!1),Y=Object(m.a)(W,2),J=Y[0],K=Y[1],Q=Object(r.useState)(!1),X=Object(m.a)(Q,2),Z=X[0],$=X[1],ee=c.params.slug,te=function(e){var t;t={id:S._id,user:O._id,rating:e},N("video/submitRating",t)};return Object(r.useEffect)((function(){Object(l.a)(i.a.mark((function e(){var t,n,r,a,s,c,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O||!O._id){e.next=6;break}return e.next=3,H(ee);case 3:(t=e.sent)&&t.isSuccess&&(C(t.data.video),(null===(n=t.data)||void 0===n||null===(r=n.video)||void 0===r||null===(a=r.likes)||void 0===a?void 0:a.includes(O._id))&&R(!0),(null===(s=t.data)||void 0===s||null===(c=s.video)||void 0===c||null===(o=c.dislikes)||void 0===o?void 0:o.includes(O._id))&&q(!0)),f(!1);case 6:(l=document.getElementsByTagName("video")[0])&&(l.ontimeupdate=function(){l.currentTime/l.duration>.3&&$(!0)});case 8:case"end":return e.stop()}}),e)})))()}),[ee,O]),Object(r.useEffect)((function(){Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P&&O&&S)){e.next=15;break}if(q(!1),I){e.next=10;break}return e.next=5,r=S._id,a=O._id,N("video/like/".concat(r,"/").concat(a));case 5:t=e.sent,C(t.data.result),t&&t.isSuccess&&(M(!1),R(!0)),e.next=15;break;case 10:return e.next=12,L(S._id,O._id);case 12:n=e.sent,C(n.data.result),n&&n.isSuccess&&(M(!1),R(!1));case 15:case"end":return e.stop()}var r,a}),e)})))()}),[I,P,S,O]),Object(r.useEffect)((function(){Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(J&&O&&S)){e.next=15;break}if(R(!1),z){e.next=10;break}return e.next=5,r=S._id,a=O._id,N("video/dislike/".concat(r,"/").concat(a));case 5:t=e.sent,C(t.data.result),t&&t.isSuccess&&(K(!1),q(!0)),e.next=15;break;case 10:return e.next=12,B(S._id,O._id);case 12:n=e.sent,C(n.data.result),n&&n.isSuccess&&(K(!1),q(!1));case 15:case"end":return e.stop()}var r,a}),e)})))()}),[z,J,S,O]),g||O?Object(x.jsxs)("div",{children:[Object(x.jsx)(h,{active:""}),Object(x.jsx)("div",{className:"flex flex-wrap justify-center",children:Object(x.jsx)("div",{className:"max-w-7xl w-full",children:b?Object(x.jsx)(p,{height:"90vh"}):Object(x.jsx)("div",{className:"flex flex-wrap justify-center py-5 ",children:Object(x.jsxs)("div",{className:"w-full lg:w-8/12 px-2",children:[Object(x.jsx)("video",{className:"w-full",src:"".concat(w.fileServer).concat(null===S||void 0===S?void 0:S.video),controls:!0}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("span",{className:"font-bold text-lg block",children:null===S||void 0===S?void 0:S.title}),S.ratings&&S.ratings.length>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Average rating"}),Object(x.jsx)(F.a,{emptySymbol:U,fullSymbol:V,initialRating:S.ratings.reduce((function(e,t){return e+t.rating}),0)/S.ratings.length,readonly:!0})]}),(Z||S.ratings.filter((function(e){return e.user==O._id}))[0])&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Your rating"}),Object(x.jsx)(F.a,{onClick:function(e){te(e)},initialRating:null===(t=S.ratings.filter((function(e){return e.user==O._id}))[0])||void 0===t?void 0:t.rating,emptySymbol:U,fullSymbol:V})]}),Object(x.jsxs)("div",{className:"flex mt-2 border-b pb-2 border-gray-400",children:[Object(x.jsxs)("div",{className:"ml-2 font-medium flex-grow-1",children:[Object(x.jsx)("span",{className:"text-sm text-gray-600 font-medium w-full block",children:null===(n=S.user)||void 0===n?void 0:n.name}),Object(x.jsx)("span",{className:"text-sm text-gray-400 font-medium w-full block",children:S.createdAt.toString().slice(0,10)})]}),Object(x.jsxs)("div",{className:"flex",children:[Object(x.jsxs)("div",{className:"flex flex-col align-items-center text-center",children:[Object(x.jsx)("span",{className:"mx-2 flex",role:"button",onClick:function(){M(!0)},children:Object(x.jsx)("i",{className:"bx ".concat(!0===I?"bxs-like":"bx-like"),style:{fontSize:"24px",color:"#000"}})}),Object(x.jsx)("div",{className:"likes-count text-xs",children:null===S||void 0===S||null===(a=S.likes)||void 0===a?void 0:a.length})]}),Object(x.jsxs)("div",{className:"flex flex-col align-items-center text-center",children:[Object(x.jsx)("span",{className:"mx-2 flex",role:"button",onClick:function(){K(!0)},children:Object(x.jsx)("i",{className:"bx ".concat(!0===z?"bxs-dislike":"bx-dislike"),style:{fontSize:"24px",color:"#000"}})}),Object(x.jsx)("div",{className:"likes-count text-xs",children:null===S||void 0===S||null===(s=S.dislikes)||void 0===s?void 0:s.length})]}),Object(x.jsx)(Ae,{videoData:S})]})]}),Object(x.jsx)("span",{className:"text-sm text-justify text-gray-600 w-full block my-2",children:null===S||void 0===S?void 0:S.description}),Object(x.jsx)(Ce,{videoData:S})]})]})})})})]}):Object(x.jsx)(u.a,{to:"/login?redirect=".concat(window.location.pathname)})},Ue=function(e){var t=e.video;return Object(x.jsxs)("div",{className:" rounded overflow-hidden border w-full bg-white ",children:[Object(x.jsx)("div",{className:"w-full h-thumb bg-cover overflow-hidden",style:{backgroundImage:"url(".concat(w.fileServer+(null===t||void 0===t?void 0:t.thumbnail),")")}}),Object(x.jsx)("div",{className:"px-2 my-2 text-left",children:Object(x.jsx)("div",{className:"w-full flex justify-between ",children:Object(x.jsx)("div",{className:"flex",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"ml-2 font-bold text-sm block",children:null===t||void 0===t?void 0:t.title})})})})})]})},Ve=function(e){e.history;var t=Object(r.useContext)(j),n=t.user,a=t.authLoading,s=Object(r.useState)([]),c=Object(m.a)(s,2),o=c[0],f=c[1],v=Object(r.useState)([]),O=Object(m.a)(v,2),g=O[0],w=O[1],y=Object(r.useState)(!0),k=Object(m.a)(y,2),S=k[0],C=k[1],T=Object(r.useState)("All"),_=Object(m.a)(T,2),I=_[0],R=_[1],D=Object(r.useState)(""),G=Object(m.a)(D,2),H=G[0],L=G[1],B=Object(r.useState)(!1),M=Object(m.a)(B,2),E=M[0],A=M[1],F=Object(r.useState)(""),U=Object(m.a)(F,2),V=U[0],z=U[1],q=function(e){z(e);var t=Object(b.a)(o).sort((function(t,n){switch(e){case"Upload Date":return new Date(n.createdAt).getTime()-new Date(t.createdAt).getTime();case"Likes":return n.likes.length-t.likes.length;case"Dislikes":return n.dislikes.length-t.dislikes.length;default:return 1}}));w(t),A(!1)},W=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:(t=e.sent)&&t.isSuccess&&(f(t.data.videos),w(t.data.videos)),C(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){W()}),[]),a||n?Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)(h,{active:"home"}),Object(x.jsxs)("div",{className:"py-5 px-8",children:[Object(x.jsxs)("div",{className:"w-full flex flex-row justify-between",children:[Object(x.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={keyword:H},N("video/searchVideoFromKeyword",t)).then((function(e){e&&e.isSuccess&&(f(e.data.videos),w(e.data.videos))}))},className:"block",children:[Object(x.jsx)("input",{className:"bg-white text-gray-700 focus:outline-none rounded-left focus:shadow-outline border border-gray-300 rounded py-2 px-4 mb-2 inline-block w-96 mx-auto appearance-none",name:"searchVideo",required:!0,placeholder:"Search Video",onChange:function(e){L(e.target.value)}}),Object(x.jsx)("button",{type:"submit",className:"bg-white hover:bg-teal-600 px-4 py-2 text-black rounded text-white border border-sm","inline-block":!0,children:"Submit"})]}),Object(x.jsxs)("div",{class:"relative inline-block text-left w-lg cursor-pointer",children:[Object(x.jsx)("div",{onClick:function(){A(!E)},children:Object(x.jsxs)("button",{type:"button",class:"inline-flex justify-center w-40 min-w-full rounded-md border border-gray-800 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mb-2",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:[0==V.length?"Sort By":V,Object(x.jsx)(ie.a,{className:"h-4 w-4 ml-2",icon:E?me.ic_arrow_drop_up:be.ic_arrow_drop_down})]})}),E&&Object(x.jsxs)("div",{class:"origin-top-right min-w-fit absolute right-0 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none w-full max-h-44 overflow-y-scroll",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",children:[Object(x.jsx)("div",{class:"py-1",role:"none",children:Object(x.jsx)("div",{class:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",id:"menu-item-2",onClick:function(){return q("Upload Date")},children:"Upload Date"})}),Object(x.jsx)("div",{class:"py-1",role:"none",children:Object(x.jsx)("div",{class:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",id:"menu-item-2",onClick:function(){return q("Likes")},children:"Likes"})}),Object(x.jsx)("div",{class:"py-1",role:"none",children:Object(x.jsx)("div",{class:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",id:"menu-item-2",onClick:function(){return q("Dislikes")},children:"Dislikes"})})]})]})]}),Object(x.jsxs)("div",{className:"mx-auto mt-4 block lg:flex flex-row text-center",children:[Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){w(o),R("All")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("All"==I?"bg-gray-200":"bg-white"),children:"All"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Fiction")})),w(e),R("Fiction")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Fiction"==I?"bg-gray-200":"bg-white"),children:"Fiction"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Romance")})),w(e),R("Romance")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Romance"==I?"bg-gray-200":"bg-white"),children:"Romance"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Rom-Com")})),w(e),R("Rom-Com")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Rom-Com"==I?"bg-gray-200":"bg-white"),children:"Rom-Com"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Thriller")})),w(e),R("Thriller")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Thriller"==I?"bg-gray-200":"bg-white"),children:"Thriller"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Adventure")})),w(e),R("Adventure")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Adventure"==I?"bg-gray-200":"bg-white"),children:"Adventure"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Horror")})),w(e),R("Horror")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Horror"==I?"bg-gray-200":"bg-white"),children:"Horror"})}),Object(x.jsx)("div",{className:"inline-block mx-auto mb-2",onClick:function(){var e=Object(b.a)(o);e=o.filter((function(e){return e.categories.includes("Comedy")})),w(e),R("Comedy")},children:Object(x.jsx)("div",{className:"flex mx-2 justify-center items-center h-8 px-4 rounded-full text-sm font-bold border shadow-md min-w-max cursor-pointer hover:bg-gray-100 "+("Comedy"==I?"bg-gray-200":"bg-white"),children:"Comedy"})})]}),Object(x.jsxs)("div",{className:"max-w-7xl text-center",children:[Object(x.jsx)("h2",{className:"text-7xl text-black"}),S&&Object(x.jsx)(p,{height:"90vh"}),!S&&Object(x.jsx)("div",{className:"grid grid-cols-6 md:grid-cols-4 sm:grid-cols-3",children:g.map((function(e,t){return Object(x.jsx)("div",{className:"mb-4 py-5 mx-2",children:Object(x.jsx)(d.b,{to:"video/".concat(e.slug),children:Object(x.jsx)(Ue,{video:e})})})}))})]})]})]}):Object(x.jsx)(u.a,{to:"/login"})},ze=function(){var e=Object(r.useContext)(j),t=e.setUser,n=e.setAuthLoading,a=function(){var e=Object(l.a)(i.a.mark((function e(){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=localStorage.getItem("auth_token"))&&(a=Object(Z.a)(r),t(a)),n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a()}),[]),Object(x.jsx)("div",{children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)($.a,{}),Object(x.jsx)(X,{}),Object(x.jsxs)(u.d,{children:[Object(x.jsx)(u.b,{exact:!0,path:"/login",component:ae}),Object(x.jsx)(u.b,{exact:!0,path:"/",component:q}),Object(x.jsx)(u.b,{exact:!0,path:"/video/:slug",component:Fe}),Object(x.jsx)(u.b,{exact:!0,path:"/profile",component:de}),Object(x.jsx)(u.b,{exact:!0,path:"/videos",component:Ve}),Object(x.jsx)(u.b,{exact:!0,path:"/upload-video",component:xe}),Object(x.jsx)(u.b,{exact:!0,path:"/edit-video/:slug",component:je})]})]})})};n(105);c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(f,{children:Object(x.jsx)(ze,{})})}),document.getElementById("root"))},27:function(e,t,n){e.exports={modal:"Popup_modal__1POWc",header:"Popup_header__GLIqO",content:"Popup_content__vQXm0",actions:"Popup_actions__3Ugqj",close:"Popup_close__203FY"}},60:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.c19a4c0a.chunk.js.map